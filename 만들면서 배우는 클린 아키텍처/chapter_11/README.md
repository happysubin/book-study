# chapter 11. 의식적으로 지름길 사용하기

## 왜 지름길은 깨진 창문 같을까?

* 깨진 창문 이론을 정리하면 아래와 같다.
* 어떤 것이 멈춘 것처럼 보이고, 망가져 보이고 혹은 관리되지 않는다고 여겨지면 인간의 뇌는 이를 더 멈추고, 망가뜨려도 된다고 생각한다.

코드 작업에는 다음과 같이 적용된다.

* 품질이 떨어진 코드에서 작업할 때 더 낮은 품질의 코드를 추가하기가 쉽다.
* 코딩 규칙을 많이 어긴 코드에서 작업할 때 또 다른 규칙을 어기기도 한다.
* 지름길을 많이 사용한 코드에서 작업할 때 또 다른 지름길을 추가하기도 한다.

이 모든 것을 고려하면 이른바 레거시라고 불리는 많은 코드의 품질이 시간이 가면서 심하게 낮아졌다는 게 그리 놀라운 일이 아니다.

## 깨끗한 상태로 시작할 책임

* 가능한 한 지름길을 거의 쓰지 않고 기술 부채를 지지 않은 채로 프로젝트를 깨끗하게 시작하는 것이 중요하다.
* 지름길이 몰래 스며드는 순간 깨진 창문과 같아져 버려서 더 많은 지름길을 끌어들이기 때문이다.
* 소프트웨어 프로젝트느 대개 큰 비용이 들고 장기적인 노력을 필요로 하기 때문에 깨진 창문을 막는 것이 소프트웨어 개발자들의 아주 막대한 책임이다.
* 지름길을 취하는 것도 실용적일 때가 있다. 이러한 지름길에 대해서는 세심한 기록, 즉 문서화를 잘 해둬야 한다.

이제 지름길의 효과를 살펴보고, 찬반 의견을 살펴보자.

## 유스케이스 간 모델 공유하기

* 유스케이스마다 입출력 모델을 다르게 가져야 한다.
* 즉 입력 파라미터의 타입과 반환값의 타입이 달라야 한다는 뜻이다.

유스케이스 간에 입출력 모델을 공유하게 되면 유스케이스들 사이에 결합이 생긴다.

* 그러면 유스케이스 간에 공유하는 모델이 변경되면 두 유스케이스 모두 영향을 받는다.
* SRP에서 이야기하는 변경할 이류를 공유하는 것이다.
* 유스케이스가 기능적으로 묶여 있을 때는 입출력 모델을 공유하는 것이 유효하다. 즉, 특정 요구사항을 공유할 때 괜찮다.
* 이 경우 특정 세부사항을 변경할 경우 실제로 두 유스케이스 모두에 영향을 주고 싶은 것이다.
* 두 유스케이스가 서로 간에 미치는 영향 없이 독립적으로 진화해야 한다면 입출력 모델을 공유하는 방식은 지름길이 된다.
* 만약 독립적으로 진화해야 한다면 처음에는 똑같은 입출력 클래스를 복사해야 하더라도 일단 분리해서 시작해야 한다.

## 도메인 엔티티를 입출력 모델로 사용하기

* 비즈니스 로직을 다루는 도메인 엔티티가 입출력 모델의 역할도 수행해야 한다.
* 개인적으로 이건 최악이라고 생각.
* 어쩔 수 없이 도메인 엔티티를 입력 모델로 사용했더라도 도메인 모델로부터 독립적인 전용 입력 모델로 교체해야하는 시점을 잘 파악하자.

## 인커밍 포트 건너 뛰기

* 아웃고잉 프트는 애플리케이션 계층과 아웃고잉 어댑터 사이의 의존성을 역전시키기 위한 필수 요소인 반면 인커밍 포트는 의존성 역전에 필수적인 요소는 아니다.
* 인커밍 포트를 제거하면서 인커밍 어댑터와 애플리케이션 계층 사이의 추상화 계층을 줄였다.
* 전용 인커밍 포트를 유지하면 한눈에 진입점을 식별할 수 있다. 이는 새로운 개발자가 코드를 파악할 때 특히 더 도움된다.
* 인커밍 포트를 유지해야 하는 또 다른 이유는 아키텍처를 쉽게 강제할 수 있기 때문이다.

애플리케이션의 규모가 작거나 인커밍 어댑터가 하나밖에 없어서 모든 제어 흐름을 인커밍 포트의 도움 없이 단숨에 파악할 수 있다면 인커밍 포트가 없는 것이 편하다.
그러나 애플리케이션의 규모가 이후로도 계속 작게 유지되거나 인커밍 어댑터가 계속 하나밖에 없을 것이라고 확신할 수는 없다.

## 애플리케이션 서비스 건너 뛰기

* 어떤 유스케이스에서는 애플리케이션 계층을 통째로 건너뛰고 싶을 수도 있다.
* 그러나 애플리케이션 서비스가 없으면 도메인 로직을 둘 곳이 없다.
* 이 말은 애플리케이션 코어에 유스케이스라고 핢 만한 것이 없어진다.
* 시간이 지나면서 유스케이스가 적적 복잡해지면 도메인 로직을 그대로 아웃고잉 어댑터에 추가하고 싶다는 생각이 든다.
* 이러면 도메인 로직이 흩어져서 도메인 로직을 찾거나 유지보수하기가 어려워진다.
* 역시 이것도 최악 중 하나라고 생각한다.

### 지름길을 선택할 경우에는 반드시 기록을 남겨야 한다. 제일 중요한 것은 팀이 적절하게 합의를 보는 것이 제일 중요하다.