
# 습관적으로 중복을 제거하는 나쁜 SQL 문

## 튜닝 전

```sql
select distinct 사원.사원번호, 사원.이름, 사원.성, 부서관리자.부서번호
        from 사원
                 join 부서관리자 on 사원.사원번호 = 부서관리자.사원번호
                 
```


```sql
explain select distinct 사원.사원번호, 사원.이름, 사원.성, 부서관리자.부서번호
        from 사원
                 join 부서관리자 on 사원.사원번호 = 부서관리자.사원번호
```

중복된 데이터를 제외하고 출력하도록 distinct를 사용했다. 

distinct를 사용하면서 별도의 임시테이블을 만들고 있음을 실행 계획에서 확인할 수 있다. (Using temporary)

## 튜닝 후

```sql
select 사원.사원번호, 사원.이름, 사원.성, 부서관리자.부서번호
        from 사원
                 join 부서관리자 on 사원.사원번호 = 부서관리자.사원번호
                 
```


```sql
explain select 사원.사원번호, 사원.이름, 사원.성, 부서관리자.부서번호
        from 사원
                 join 부서관리자 on 사원.사원번호 = 부서관리자.사원번호
```

사원 테이블의 기본 키는 사원 번호다. 즉 SELECT 절에 작성된 사원.사원버호에는 중복된 데이터가 없다.

따라서 굳이 DISTINCT라는 키워드로 정렬 작업을 하고 중복을 제거하는 작업이 필요한지 고민해봐야 한다.

쿼리 튜닝을 한 sql문은 DISTINCT 키워드를 제거했다.