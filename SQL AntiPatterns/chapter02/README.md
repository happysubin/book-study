## chapter02. 무단횡단

프로그래머들은 보통 다대다 관계를 위한 교차테이블 생성을 피하기 위해 쉼표로 구분된 목록을 사용한다. 
글쓴이는 이를 무단횡단이라 부른다. 무단횡단 또한 교차로를 피하는 행위이기 때문

### 목표: 다중 값 속성 저장

#### 안티 패턴: 쉼표로 구분된 목록에 저장

쉼표로 구분해서 목록에 저장한다면 아래와 같은 경우 쿼리가 까다로워진다.

__예시는 프로적트 테이블에 여러 개의 계정 아이디를 쉽표로 구분한다.__

1. 특정 계정에 대한 제품 조회
    * 모든 FK가 하나의 필드에 결합되어 있으면 쿼리가 어렵다.
    * 패턴 매칭을 사용 해야하는데 인덱스도 활용하지 못하고 잘못된 결과가 리턴될 수도 있다. 

2. 주어진 제품에 대한 계정 정보 조회
   * 쉼표로 구분된 목록을 참조하는 테이블의 대응되는 행과 조인하기도 불편하다.
   * 인덱스를 활용할 기회가 없어지고 카테시안 곱을 생성한 다음, 모든 행의 조합에 대해 정규 표현식으로 평가해야한다.

3. 집계 쿼리 만들기
4. 특정 제품에 대한 게정 갱신
   * 삭제에 많은 코드 작성이 필요하다.
5. 제품 아이디 유효성 검증
6. 구분자 문자 선택
7. 목록 길이 제한

### 안티 패턴 인식 방법

* 이 목록이 지원해야하는 최대 항목 수는 얼마나 될까?
* SQL에서 단어의 경계를 어떻게 알아내는지 알아?
* 이 목록에서 절대 나오지 않을 문자가 어떤 게 있을까?

### 안티패턴 사용이 합당한 경우

1. 쿼리 성능 향상을 위한 반정규화

### 해법: 교차 테이블 생성 (중간 테이블)

__항상 다대다 관계 테이블에서는 교차(중간) 테이블을 활용하자.__
