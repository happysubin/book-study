
# chapter 02. 네트워크 주소

2장에서는 다음과 같은 내용을 다룸

* 네트워크 기본
* NetworkInterfcae 클래스 사용: 시스템 디바이스에 대한 접속 제공
* URL/URI/URN
* Inet4Address와 Inet6Address 이 클래스의 사용법을 설명
* 네트워크 속성

## 네트워크 기본

자바는 IP 주소와 리소스에 접근하기 위해 InetAddress 클래스를 사용한다.
디바이스에 할당된 IP 주소는 정적 혹은 동적일 수 있다.
정적 주소는 디바이스가 재부팅될 때마다 변경되지 않을 것이다.
동적 주소는 디바이스가 재부팅될 대마다 혹은 네트워크 연결이 재설정 될 때 주소가 변경될지도 모른다.

관리자는 일반적으로 수동으로 정적 주소를 할당한다.
동적 주소는 주로 DHCP 서버에서 실행하는 DHCP를 사용해 할당된다.
거대한 거대 IPv6 주소 공간 때문에 IPv6에서는 DHCP가 유용하지 않다.

그러나 네트워크의 외부 관점에서는 DHCP가 네트워크 내의 더 많은 프라이버시를 보장하고 랜덤 주소의 생성을 지원하는 작업에 유용한다고 생각된다.
IANA(Internet Assigned Numbers Authority)는 IP 주소 공간 할당의 배정을 담당한다.
다섯 RIRs는 일반적으로 ISP로 지칭되는 로컬 인터넷 엔티티에서 IP 주소 블록을 배정한다.

IP 프로토콜 상세 내용에 대한 다음과 같은 표준화 문서가 있다.

* RFC 790-지정번호 (ex IPv4 A,B,C 클래스)
* RFC 1918-사설 인터넷을 위한 주소 할당
* RFC 2365-관리상 IP 멀티캐스트 범위
* RFC 2373-IPv6 주소 아키텍쳐

## 네트워크 기본 이해

인터넷에 연결된 디바이스를 노드라고 부른다.
컴퓨터 노드는 호스트라고 한다. 
노드 간의 통신은 HTTP 혹은 UDP와 같은 프로토콜을 이용한 링크를 따라 수행된다.

링크는 동축 케이블, 트위스트 페어, 그리고 광케이블 같은 유선이거나 전자레인지, 휴대전화, 와이파이 혹은 위성통신 같은 무선으로 할 수 있다.

노드는 NIC, 브리지, 스위치, 허브, 라우터 같은 디바이스를 포함한다.
디바이스는 컴퓨터 간에 다양한 형태의 데이터 전송에 모두 연관된다.

IP 주소를 가진 NIC는 컴퓨터의 일부다.
브리지는 더 큰 네트워크를 다수의 작은 네트워크로 분해할 수 있게 두 개의 네트워크 세그먼트를 연결한다.
리피터와 허브는 주로 신호의 강도를 증폭시켜 재전송하기 위해 사용한다.

허브는 여러 개의 포트를 처리하고 접속된 모든 포트로 단순히 데이터를 전송한다.
스위치는 트래픽 기반에서 데이터를 전송하는 것을 학습한다.
라우터는 메시지를 조작하고 라우트하게 프로그램할 수 있다.

### 네트워크 아키텍쳐와 프로토콜

일반적인 네트워크 아키텍쳐는 버스, 스타, 트리 타입으로 구성된다.
이러한 물리적인 네트워크는 종종 가상 네트워크인 오버레이 네트워크를 지원하기 위해 사용된다.
네트워크는 P2P 애플리케이션과 같은 애플리케이션을 지원하는 네트워크 아키텍쳐를 생성하기 위한 근본적인 네트워크를 추상화한다.

두 개의 컴퓨터가 통신할 때 프로토콜을 사용한다.
네트워크의 여러 계층에서 사용되는 다양한 프로토콜이 있다. (HTTP, TCP, UDP, IP)

네트워크에서 일반적인 모델은 OSI 7 계층이다.

## NetworkInterface 클래스 사용

NetworkInterface 클래스는 네트워크에서 노드로 작동하는 디바이스에 접속하는 수단을 제공한다.
NetworkInterface 클래스는 또한 로우레벨 디바이스 주소를 얻을 수 있는 수단을 제공한다.
다중 네트워크에는 동시에 많은 시스템이 접속한다.
네트워크 카드 같은 유선이거나 무선 LAN 혹은 블루투스 연결을 위한 무선일 수도 있다.

NetworkInterface 클래스는 IP 주소를 나타내고, 이 IP 주소에 대한 정보를 제공한다.
네트워크 인터페이스는 컴퓨터와 네트워크 간의 접속점이다.
네트워크 인터페이스는 주로 특정 타입의 NIC를 사용한다.
그것은 물리적 명시를 가질 필요는 없지만, 루프백 연결을 수행해 소프트웨어에서 수행될 수 있다.


## MAC 주소 획득

MAC(Media Access Control) 주소는 NIC를 식별하는 데 사용된다.
NIC 제조사는 보통 MAC 주소를 할당하고 MAC 주소는 하드웨어의 일부다.
노드의 각 NIC는 고유한 MAC 주소를 소유해야 한다.
이론적으로 위치에 상관 없이 모든 NIC는 고유한 MAC 주소가 부여된다.

## 네트워크 주소 개념

### URL/URI/URN

이 용어들은 인터넷 리소스의 이름과 위치를 참조하는 데 사용된다.

* URI는 웹사이트나 인터넷상의 파일과 같은 리소스의 이름을 식별. 리소스의 이름과 위치를 포함할 수도 있다.
* URL은 리소스가 위치한 장소와 검색하는 방법을 구별한다.
* 프로토콜은 URL의 첫 번째 부분을 구성하고, 데이터를 검색하는 방법을 지정한다. HTTP 같은 프로토콜을 지정한다.
* URN은 위치가 아닌 리소스를 식별한다. URL이 도시의 위도와 경도와 유사하다면 URN은 도시의 이름과 같다.
* 웹 페이지 혹은 파일과 같은 리소스가 이동되는 경우 리소스에 대한 URL은 더이상 올바르지 않다.
* URL은 사용할 때마다 업데이트가 필요.
* URN은 위치가 아니라 리소스의 이름을 구별한다.

## IP 주소와 InetAddress 클래스

### 주소 범위 문제

IP 주소의 범위는 IP 주소의 유일성을 뜻한다.
많은 가정과 사무실에서 사용되는 것 같은 로컬 네트워크 내에서의 주소는 해당 네트워크에서 로컬일 수도 있다.
범위는 다음과 같이 세 가지가 있다.

* Link-local: 인터넷에 연결되지 않은 싱글 로컬 서브넷 내에서 사용된다. 존재하는 라우터는 없다. 컴퓨터에 정적 IP 주소가 없고 DHCP 서버를 찾을 수 없는 경우에 링크 로컬 주소의 할당은 다옹으로 이뤄진다.
* Site-local: 주소가 글로벌 접두사를 요청하지 않을 때 사용되고 사이트 내에서는 고유하다. 인터넷에서 직접 도달할 수 없고, NAT 같은 매핑 서비스를 요청.
* Global: 이름에서 알 수 있듯이 인터넷에서 주소는 고유하다.