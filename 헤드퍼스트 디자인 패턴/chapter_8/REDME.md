# chapter 8. 알고리즘 캡슐화히기(템플릿 메서드 패턴)

## 템플릿 메서드 패턴의 정의

템플릿 메서드 패턴은 알고리즘의 골격을 정의한다. 템플릿 메서드를 사용하면 알고리즘의 일부 단계를 서브클래스에서 구현할 수 있으며, 알고리즘의 구조는 그대로 유지하면서 알고리즘의 특정 단계를 서브클래스에서 재정의할 수 있다.

* 템플릿 메서드 패턴은 알고리즘의 템플릿을 만든다.
* 템플릿이란 그냥 메서드로, 조금 더 구체적으로 애기하면, 일련의 단계로 알고리즘을 정의한 메서드다.
* 여러 단계 가운데 하나 이상의 단계가 추상 메서드로 정의되며, 그 추상 메서드는 서브클래스에서 구현된다.
* 서브클래스가 일부분의 구현을 처리하게 하면서도 알고리즘의 구조는 바꾸지 않아도 된다.

## 후크

* 후크는 추상 클래스에서 선언되지만 기본적인 내용만 구현되어 있거나 아무 코드도 들어있지 않은 메서드다.
* 이러면 서브 클래스는 다양한 위치에서 알고리즘에 끼어들 수 있다. 물론 그냥 무시할 수도 있다.
* 후크는 다양한 용도로 쓰인다. 

서브클래스가 알고리즘의 특정 단계를 제공해야만 한다면 추상 메서드를 사용한다. 알고리즘의 특정 단계가 선택적으로 적용된다면 후크를 써야한다.
모든 서브클래스에서는 모든 추상 메서드를 오버라이딩 해야 한다.

## 할리우드 원칙

__먼저 연락하지 마세요, 저희가 연락 드리겠습니다.__

* 위 내용이 바로 할리우드 원칙이다.
* 할리우드 원칙을 활용하면 __의존성 부패__를 방지할 수 있다.
* 고수준 요소가 저수준 요소에 의존하고, 그 저수준 요소는 다시 고수준 요소에 의존하고 이런 반복적인 상황처럼 의존성이 꼬인 상황을 의존성이 부패했다고 한다.
* 할리우드 원칙을 사용하면, 저수준 구성 요소가 시스템에 접속할 수 는 있지만, 언제 어떻게 그 구성 요소를 사용할지는 고수준 구성 요소가 결정한다.
* 즉, 고수준 구성 요소가 저수준 구성 요소에게 '먼저 연락하지 마세요. 제가 먼저 연락 드리겠습니다.'라고 얘기하는 것과 같다.
* 템플릿 메서드 패턴을 써서 디자인하면 서브 클래스에게 '우리가 연락할테니 먼저 연락하지 마'라고 얘기하는 것과 같다.

## 템플릿 메서드 패턴 예시

* Arrays.sort, Comparable를 통해 정렬하는 방식도 템플릿 메서드 패턴 예시다.
* java.io InputStream에 있는 read() 메서드는 서브 클래스에서 구현해야 한다. 이것도 템플릿 메서드 패턴이다.